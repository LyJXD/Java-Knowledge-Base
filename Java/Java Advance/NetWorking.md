## 网络编程
网络编程是可以让设备中的程序与网络上其他设备中的程序进行数据交互的技术。
- **基本的通信架构**
	CS架构：Client客户端/Server服务端
	BS架构：Browser浏览器/Server服务端
	无论是CS架构，还是BS架构的软件都必须依赖网络编程
`java.net` 包中J2SE的API包含有类和接口，它们提供低层次的通信细节。你可以直接使用这些类和接口，来专注于解决问题，而不用关注通信细节。
`java.net` 包中提供了两种常见的网络协议的支持：UDP和TCP。
### 网络通信三要素
- **IP地址（Internet Protocol）**
	全称”互联网协议地址”，是分配给上网设备的唯一标识，可以用来定位网络上的设备。
	- **IP的两种形式**
		1. IPv4：32位，4个字节，点分十进制。
		2. IPv6: 128位，冒分十六进制。
	- **IP常用命令**
		1. `ipconfig` 查看本机IP地址
		2. `ping IP地址` 检查网络是否连通
	- **Java中IP地址的表示** `InetAddress`
- **端口号**
	标记正在计算机设备上运行的应用程序的，被规定为一个16位的二进制，范围是0~65535。
	1. **周知端口** 0~1023，被预先定义的知名应用占用（如：HTTP占用 80，FTP占用21）。
	2. **注册端口** 1024~49151，分配给用户进程或某些应用程序。
	3. **动态端口** 49152~65535，一般不固定分配某种进程，而是动态分配。
- **协议**
	网络上通信的设备，事先规定的连接规则，以及传输数据的规则被称为网络通信协议。
    **开放式网络互联标准**
    1. OSI网络参考模型：全球网络互联标准
    2. TCP/IP网络模型：事实上的国际标准
![[OSI&TCPIP.png]]
### UDP通信
- **特点**  
	1. **无连接** 只知道对端的IP和端口号就可以发送，不需要实现建立连接(就像寄信)。
	2. **不可靠** 没有确认机制，没有重传机制，不保证数据包的到达、顺序和完整性。如果因为网络故障导致该段无法发到对方，UDP协议层也不会给应用层返回任何错误信息。
	3. **低延迟** 由于不需要建立连接和确认，传输延迟较低。
	4. **高效性** 头部开销小，适合传输小数据包。
	5. **支持广播和多播** 可以向多个接收方发送数据包。
	6. **面向数据报** 应用层交给UDP多长的报文，UDP原样发送，既不会拆分，也不会合并。所以UDP不能够灵活的控制读写数据的次数和数量。
	7. **UDP存在接收缓冲区，但不存在发送缓冲区** UDP没有发送缓冲区，在调用send to时会直接将数据交给内核，由内核将数据传给网络层协议进行后续的传输动作。UDP具有接收缓冲区，但是这个接收缓冲区不能保证收到的UDP报文的顺序和发送UDP报的顺序一致，如果缓冲区满了再到达的UDP数据报就会被丢弃。
- **使用**  
	Java提供了一个java.net.DatagramSocket类来实现UDP通信。
### TCP通信
- **特点**  
	1. **可靠性** 通过确认机制和重传机制，确保数据不丢失、不重复。通过校验和检查保证 数据完整性。
	2. **有序性** 数据按发送顺序到达接收方。
	3. **面向连接** 在数据传输前需要建立连接，传输结束后需要关闭连接。
	4. **流量控制** 通过滑动窗口机制，动态调整发送速率。
	5. **拥塞控制** 通过慢启动、拥塞避免等算法，避免网络拥塞。
- **三次握手**
- **四次挥手**

